<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
    <title>U12 Football Team Manager</title>
    <meta name="description"
        content="Responsive 9v9 match-day manager with formations, timers, events and a Vue-powered player editor." />
    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="#0f172a" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css" />
</head>

<body class="bg-slate-900 text-slate-100">
    <header class="w-full border-b border-slate-800 bg-slate-950">
        <div class="backup-controls" style="display:flex;gap:.5rem;flex-wrap:wrap;margin:.5rem 0;">
            <button id="exportBtn" class="btn">Export Data</button>
            <label class="btn" style="cursor:pointer;">
                Import Data
                <input id="importInput" type="file" accept="application/json" hidden>
            </label>
        </div>

        <div class="shell px-3 sm:px-4 py-2.5 flex items-center gap-3">
            <img src="logo.png" alt="Club Logo" class="w-7 h-7" />
            <div class="font-semibold tracking-wide">U12 Football Team Manager</div>
            <div class="ml-auto flex flex-wrap items-center gap-2">
                <span id="matchTimer" class="font-mono text-base px-2 py-1 bg-slate-800 rounded">00:00</span>
                <button id="startTimer" class="btn-green">Start</button>
                <button id="pauseTimer" class="btn-amber">Pause</button>
                <button id="resetTimer" class="btn-rose">Reset</button>
                <input id="halfLengthInput" type="number" min="5" max="50" value="35" class="input w-14" />
                <button id="startFirstHalf" class="btn">Start 1st</button>
                <button id="startSecondHalf" class="btn">Start 2nd</button>
                <span class="text-[11px] px-2 py-1 bg-slate-800 rounded">
                    Half: <b id="currentHalfLabel">—</b> • Remaining: <b id="remainingTime">00:00</b>
                </span>
                <button id="openPlayerEditor" class="btn-blue">Edit Players</button>
            </div>
        </div>
    </header>

    <main class="shell px-3 sm:px-4 py-3 grid-dashboard gap-3">

        <!-- PITCH & FORMATION -->
        <section class="panel" style="grid-area:center">
            <div class="panel-title flex items-center justify-between">
                <span>Pitch & Formation</span>
                <div class="flex items-center gap-2 flex-wrap">
                    <span class="text-xs opacity-70">Template</span>
                    <select id="autoFormationSelect" class="input">
                        <option value="3-3-2">3–3–2 (default)</option>
                        <option value="3-2-3">3–2–3</option>
                        <option value="2-3-3">2–3–3</option>
                        <option value="4-3-1">4–3–1</option>
                    </select>
                </div>
            </div>
            <!-- NEW: panel-body wrapper -->
            <div class="panel-body panel-body--pitch">
                <div id="formationField"
                    class="relative rounded-lg overflow-hidden border border-slate-800 w-full aspect-[16/10] max-h-[72vh] min-h-[380px] lg:min-h-[440px]">
                </div>
            </div>
        </section>

        <!-- PLAYER MANAGER (under Pitch) -->
        <section class="panel" style="grid-area:left">
            <div class="panel-title flex items-center justify-between">
                <span>Player Manager</span>
                <button id="putStartersOnPitch" class="btn-green hidden">Put Starters</button>
            </div>
            <!-- NEW: panel-body wrapper -->
            <div class="panel-body">
                <div class="text-[11px] opacity-70 mb-2">Team Line Up (All Players)</div>
                <ul id="teamLineUpList" class="lineup text-sm"></ul>
                <div class="flex gap-2 pt-2 sticky-actions">
                    <button id="saveFormation" class="btn">Save</button>
                    <button id="loadFormation" class="btn">Load</button>
                    <button id="saveFormationToMatch" class="btn-indigo">Attach To Match</button>
                </div>
            </div>
        </section>

        <!-- MATCH CONTROLS -->
        <section class="panel" style="grid-area:right">
            <div class="panel-title">Match Controls</div>
            <!-- NEW: panel-body wrapper -->
            <div class="panel-body">
                <div class="space-y-2.5">
                    <div class="flex gap-2">
                        <select id="matchSelect" class="input flex-1">
                            <option value="" disabled selected>— Select a match —</option>
                        </select>
                        <button id="newMatch" class="btn-green">New</button>
                        <button id="deleteMatch" class="btn-rose">Delete</button>
                    </div>

                    <div class="panel-subtitle">Match Events</div>
                    <form id="eventForm" class="flex flex-col gap-2">
                        <select id="eventType" class="input">
                            <option value="Goal">Goal</option>
                            <option value="Assist">Assist</option>
                            <option value="Yellow/Red Card">Yellow/Red Card</option>
                        </select>
                        <select id="eventPlayer" class="input" required>
                            <option value="" disabled selected>— Select Player —</option>
                        </select>
                        <select id="assistPlayer" class="input hidden">
                            <option value="" selected>— Select Assist Player (optional) —</option>
                        </select>
                        <button class="btn-amber">Log Event</button>
                    </form>

                    <ul id="eventLog" class="list space-y-1 max-h-[28vh] overflow-auto"></ul>
                    <div class="flex gap-2">
                        <button id="exportCSV" class="btn">Export CSV</button>
                        <button onclick="window.print()" class="btn">Print</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- GAME CHANGERS -->
        <section class="panel" style="grid-area:bottom-right">
            <div class="panel-title">Game Changers</div>
            <!-- NEW: panel-body wrapper -->
            <div class="panel-body">
                <ul id="benchList" class="grid grid-cols-3 lg:grid-cols-4 gap-2"></ul>
            </div>
        </section>

    </main>


    <div id="playerEditorModal" class="pe-modal hidden">
        <div class="pe-backdrop"></div>
        <div class="pe-panel">
            <div id="playerEditorApp"></div>
        </div>
    </div>

    <script id="playersData" type="application/json">[...]</script>
    <script>
        if ("serviceWorker" in navigator && location.protocol.startsWith("http")) {
            navigator.serviceWorker.register("service-worker.js");
        }
    </script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <script src="script.js" defer></script>
    <script src="players-editor.js" defer></script>
</body>

</html>